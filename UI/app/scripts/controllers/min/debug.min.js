"use strict";angular.module("uavRcApp").controller("DebugCtrl",function(a,n,i){a.signal="ack",a.msgs=[],a.log=[],a.predefinedSignals=[{signal:"UAV_STATUS_GET",body:{},ack:!0},{signal:"UAV_GPSDATA_GET",body:{},ack:!0},{signal:"UAV_STATUS_GET",body:{},ack:!0},{signal:"UAV_CAM_ANGLE_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_LL_STATUS_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_IMU_RAWDATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_IMU_CALCDATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_RC_DATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_CTRL_PUT_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_GPS_DATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_CURRENT_WAY_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_GPS_DATA_ADVANCED_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_CAM_DATA_GET",body:{},ack:!0},{signal:"UAV_CAM_TRIGGER",body:{},ack:!0},{signal:"UAV_CAM_ANGLE_SET",body:{pitch:0,roll:0},ack:!0},{signal:"UAV_GOTO",body:{lat:56.897123,lon:11.123812,alt:52,heading:13},ack:!0},{signal:"UAV_GOTOANDCAM",body:{lat:56.897123,lon:11.123812,alt:52,heading:13,cam:{pitch:-10,roll:0,trigger:!0}},ack:!0},{signal:"UAV_START",body:{},ack:!0},{signal:"UAV_STOP",body:{},ack:!0},{signal:"UAV_HOME",body:{},ack:!0}],n.on("*",function(n){a.log.push(n)}),a.setPredefined=function(n){a.signal=n.signal,a.dataString=JSON.stringify(a.msg.body=n.body,null,"	"),a.msg.header.msg.ack=n.ack},a.emit=function(){var i,g=angular.copy(a.msg);a.msg.header.msg.ack&&(i=function(a){console.log(a);new Date;s.ack=a,s.timeStringAck=+new Date-s.timestamp+" ms"}),n.emit(a.signal,g,i);var s=(new Date,{signal:a.signal,msg:g,timeString:(new Date).toString("HH:mm:ss tt"),timestamp:+new Date});console.log(g),a.msgs.push(s),a.msg.header.msg.id=Math.random().toString(36).substring(2,11)},n.on("ack",function(a){_.path(a,"header.msg.ack")&&(a=_.ioMsg(null,null,a),n.emit("ACK",a))}),n.on("ackerror",function(a){_.path(a,"header.msg.ack")&&(a=_.ioMsg(403,null,a),n.emit("ACK",a))}),n.on("ackerror",function(){}),a.msg=_.ioMsg(null,null),a.validBody=!0;var g=function(){a.msg.header.msg.timestamp=+new Date,i(g,20)};g(),a.dataChange=function(){try{a.msg.body=JSON.parse(a.dataString),a.validBody=!0}catch(n){a.msg.body=n.message,a.validBody=!1}}});