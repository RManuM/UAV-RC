"use strict";angular.module("uavRcApp").controller("DebugCtrl",function(e,t,a){e.signal="ack",e.msgs=[],e.log=[],t.on("IO_LOG",function(t){e.log.push(t)}),e.emit=function(){var a=(angular.copy(e.msg),{signal:e.signal,msg:angular.copy(e.msg),timeString:(new Date).toLocaleString(),timestamp:+new Date});e.msgs.push(a);var n;e.msg.header.ack&&(n=function(e){a.ack=e,a.timeStringAck=(new Date).toLocaleString()}),t.emit(e.signal,_.pick(a.msg,"header","body"),n),e.msg.header.msg.id=Math.random().toString(36).substring(2,11)},t.on("ack",function(e){console.log("test"),e.header.req=e.header.msg,e.header.msg={id:Math.random().toString(36).substring(2,11),emitter:"UI",timestamp:+new Date},e.body={ack:e.header.ack},e.header.ack=!1,console.log(e),t.emit("ACK",e)}),e.msg={header:{msg:{id:Math.random().toString(36).substring(2,11),emitter:"UI"}},body:null};var n=function(){e.msg.header.msg.timestamp=+new Date,a(n,20)};n(),e.dataChange=function(){try{e.msg.body=JSON.parse(e.dataString)}catch(t){e.msg.body=t.message}},t.on("debug",function(e){console.log(e)})});