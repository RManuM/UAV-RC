"use strict";angular.module("uavRcApp").controller("DebugCtrl",function(a,n,i){a.signal="ack",a.msgs=[],a.log=[],a.predefinedSignals=[{signal:"PILOT_TARGETLIST_SET",body:{id:"path1",defaults:{status:0,alt:50,heading:12,autoStart:!0,reachedThreshold:2.5,cam:{pitch:-10,roll:0,trigger:!0}},list:[{lat:56.897123,lon:11.123812,alt:52,heading:13,cam:{pitch:-20,roll:0,trigger:!0}},{lat:56.897223,lon:11.123312},{lat:56.897223,lon:11.123312,cam:{trigger:!1}}]},ack:!1},{signal:"UAV_STATUS_GET",body:{},ack:!0},{signal:"UAV_GPSDATA_GET",body:{},ack:!0},{signal:"UAV_STATUS_GET",body:{},ack:!0},{signal:"UAV_CAM_ANGLE_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_LL_STATUS_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_IMU_RAWDATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_IMU_CALCDATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_RC_DATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_CTRL_PUT_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_GPS_DATA_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_CURRENT_WAY_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_GPS_DATA_ADVANCED_GET",body:{},ack:!0},{signal:"UAV_ASCTEC_CAM_DATA_GET",body:{},ack:!0},{signal:"UAV_CAM_TRIGGER",body:{},ack:!0},{signal:"UAV_CAM_ANGLE_SET",body:{pitch:0,roll:0},ack:!0},{signal:"UAV_GOTO",body:{lat:56.897123,lon:11.123812,alt:52,heading:13},ack:!0},{signal:"UAV_GOTOANDCAM",body:{lat:56.897123,lon:11.123812,alt:52,heading:13,cam:{pitch:-10,roll:0,trigger:!0}},ack:!0},{signal:"UAV_START",body:{},ack:!0},{signal:"UAV_STOP",body:{},ack:!0},{signal:"UAV_HOME",body:{},ack:!0}],n.on("*",function(n){a.log.push(n)}),a.setPredefined=function(n){a.signal=n.signal,a.dataString=JSON.stringify(a.msg.body=n.body,null,"	"),a.msg.header.msg.ack=n.ack},a.emit=function(){var i,l=angular.copy(a.msg);a.msg.header.msg.ack&&(i=function(a){console.log(a);new Date;g.ack=a,g.timeStringAck=+new Date-g.timestamp+" ms"}),n.emit(a.signal,l,i);var g=(new Date,{signal:a.signal,msg:l,timeString:(new Date).toString("HH:mm:ss tt"),timestamp:+new Date});console.log(l),a.msgs.push(g),a.msg.header.msg.id=Math.random().toString(36).substring(2,11)},n.on("ack",function(a){_.path(a,"header.msg.ack")&&(a=_.ioMsg(null,null,a),n.emit("ACK",a))}),n.on("ackerror",function(a){_.path(a,"header.msg.ack")&&(a=_.ioMsg(403,null,a),n.emit("ACK",a))}),n.on("ackerror",function(){}),a.msg=_.ioMsg(null,null),a.validBody=!0;var l=function(){a.msg.header.msg.timestamp=+new Date,i(l,20)};l(),a.dataChange=function(){try{a.msg.body=JSON.parse(a.dataString),a.validBody=!0}catch(n){a.msg.body=n.message,a.validBody=!1}}});