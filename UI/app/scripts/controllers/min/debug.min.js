"use strict";angular.module("uavRcApp").controller("DebugCtrl",function(e,a,t){e.signal="ack",e.msgs=[],e.log=[],a.on("IO_LOG",function(a){e.log.push(a)}),e.emit=function(){var t=(angular.copy(e.msg),{signal:e.signal,msg:angular.copy(e.msg),timeString:(new Date).toLocaleString(),timestamp:+new Date});e.msgs.push(t);var n;e.msg.header.ack&&(n=function(e){t.ack=e,t.timeStringAck=(new Date).toLocaleString()});var r={signal:e.signal,msg:_.pick(t.msg,"header","body")};a.emit("debug",r,n),e.msg.header.msg.id=Math.random().toString(36).substring(2,11)},a.on("ack",function(e){var t=e.header.ack;e.header.req=e.header.msg,e.header.msg={id:Math.random().toString(36).substring(2,11),emitter:"UI",timestamp:+new Date},e.header.ack=!0,a.emit(t,e)}),a.on("ackerror",function(e){e.header.ack;e.header.req=e.header.msg,e.header.msg={id:Math.random().toString(36).substring(2,11),emitter:"UI",timestamp:+new Date},e.headerack=!0}),e.msg={header:{msg:{id:Math.random().toString(36).substring(2,11),emitter:"UI"}},body:null};var n=function(){e.msg.header.msg.timestamp=+new Date,t(n,20)};n(),e.dataChange=function(){try{e.msg.body=JSON.parse(e.dataString)}catch(a){e.msg.body=a.message}},a.on("debug",function(e){console.log(e)})});